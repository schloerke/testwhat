<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checking function calls • testwhat</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Checking function calls">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-120925561-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-120925561-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">testwhat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.11.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/syntax.html">Syntax</a>
</li>
<li>
  <a href="../articles/glossary.html">Glossary</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/checking-objects.html">Checking objects</a>
    </li>
    <li>
      <a href="../articles/checking-function-calls.html">Checking function calls</a>
    </li>
    <li>
      <a href="../articles/checking-output.html">Checking output</a>
    </li>
    <li>
      <a href="../articles/checking-control-flow.html">Checking control flow</a>
    </li>
    <li>
      <a href="../articles/checking-function-definitions.html">Checking function definitions</a>
    </li>
    <li>
      <a href="../articles/checking-through-string-matching.html">Checking through string matching</a>
    </li>
    <li>
      <a href="../articles/combining-sets-of-SCTs.html">Combining sets of SCTs</a>
    </li>
    <li>
      <a href="../articles/checking-markdown-documents.html">Checking markdown documents</a>
    </li>
    <li>
      <a href="../articles/electives.html">Electives</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/test-to-check.html">Test to Check</a>
    </li>
    <li>
      <a href="../articles/extensions.html">Extensions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/datacamp/testwhat">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Checking function calls</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/datacamp/testwhat/blob/master/vignettes/checking-function-calls.Rmd"><code>vignettes/checking-function-calls.Rmd</code></a></small>
      <div class="hidden name"><code>checking-function-calls.Rmd</code></div>

    </div>

    
    
<p>Testing function calls is probably one of the most common things you’ll do when writing SCTs. With <code>testwhat</code>, you can check whether students correctly called particular functions, whether the expected arguments were specified, and whether the values passed to these arguments are correct. In addition to argument checking, you can also check the result of calling a function and compare it with with this function call should’ve returned; another very robust way of checking a student’s work. <strong>This article is arguably one of the most important ones in this documentation, so read it carefully and completely.</strong></p>
<div id="example-1-basic" class="section level2">
<h2 class="hasAnchor">
<a href="#example-1-basic" class="anchor"></a>Example 1: Basic</h2>
<p>Suppose you want the student to call the <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> function on <code>pi</code> (a value that’s available in R by default), as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Round pi to three digits</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(pi, <span class="dv">3</span>)</a></code></pre></div>
<p>The following SCT tests whether the <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> function is used correctly:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"round"</span>) <span class="op">%&gt;%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="kw">check_arg</span>(., <span class="st">"x"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="kw">check_arg</span>(., <span class="st">"digits"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">}</a></code></pre></div>
<p>To find out which arguments you have to specify in <code>check_arg()</code>, you can use <code><a href="https://rdrr.io/r/base/args.html">args(round)</a></code>. This will show that the names of the arguments of the <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> function are <code>x</code> and <code>digits</code>.</p>
<p>When a student submits his code and SCT is executed, <code>check_function()</code> tests whether the student has called the function <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code>. Next, <code>check_arg()</code> checks whether each argument was specified. Finally, <code>check_equal()</code> checks whether the values of the argument are the same as in the solution. So in this case, it tests whether <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> is used with the <code>x</code> argument equal to <code>pi</code> and the second argument equal to <code>3</code>. The above SCT would accept all of the following submissions:</p>
<ul>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(pi, 3)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(pi, digits = 3)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(x = pi, digits = 3)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(digits = 3, x = pi)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(pi, digits = 1 + 2)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(digits = 5 - 2, pi^2/pi)</a></code></li>
</ul>
<div id="custom-messages" class="section level3">
<h3 class="hasAnchor">
<a href="#custom-messages" class="anchor"></a>Custom messages</h3>
<p>In case of a failure, <code>testwhat</code> will automatically generate meaningful feedback that’s specific to what the student did wrong, but you can also override these messages:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">ncm &lt;-<span class="st"> "Have you used `round()` to round `pi`?"</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">arg1ns &lt;-<span class="st"> "Have you specified the number to round?"</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">arg1inc &lt;-<span class="st"> "Have you correctly specified that `round()` should round `pi`?"</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">arg2ns &lt;-<span class="st"> "Have you specified to how many digits the number should be rounded?"</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">arg2inc &lt;-<span class="st"> "Have you correctly set the `digits` argument to 3?"</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"round"</span>, <span class="dt">not_called_msg =</span> ncm) <span class="op">%&gt;%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">  <span class="kw">check_arg</span>(., <span class="st">"x"</span>, <span class="dt">arg_not_specified_msg =</span> arg1ns) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>(<span class="dt">incorrect_msg =</span> arg1inc)</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">  <span class="kw">check_arg</span>(., <span class="st">"digits"</span>, <span class="dt">arg_not_specfied_msg =</span> arg2ns) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>(<span class="dt">incorrect_msg =</span> arg2inc)</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">}</a></code></pre></div>
</div>
<div id="eval" class="section level3">
<h3 class="hasAnchor">
<a href="#eval" class="anchor"></a><code>eval</code>
</h3>
<p>Inside <code>check_equal()</code>, you can use <code>eval</code> to control how parameters are checked:</p>
<ul>
<li>If <code>eval = FALSE</code>, the expressions of the parameters are compared as strings, not the value that results from evaluating the expression.</li>
<li>If <code>eval = TRUE</code>, which is the default, the expressions that are used to set the arguments are evaluated and their results compared.</li>
</ul>
<p>If you change the SCT as follows (which in this example is not a good idea!):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"round"</span>) <span class="op">%&gt;%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="kw">check_arg</span>(., <span class="st">"x"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>(<span class="dt">eval =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  <span class="kw">check_arg</span>(., <span class="st">"digits"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">}</a></code></pre></div>
<p>not all of the student submissions listed above would be accepted, because now <code>pi</code> is checked literally, as the string <code>"pi"</code>, not as the number <code>3.1415...</code>. Using <code>eval = FALSE</code> is interesting when you’re working with huge datasets and don’t want to compare their values exhaustively, or for objects for which the equality operator is not standard, such as SQL connections.</p>
</div>
<div id="example-2-checking-the-result-of-a-function-call-instead-of-the-arguments" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2-checking-the-result-of-a-function-call-instead-of-the-arguments" class="anchor"></a>Example 2: Checking the result of a function call instead of the arguments</h3>
<p>Checking whether the student function call, when executed, corresponds to the result of the solution function call is a <strong>very</strong> robust way of checking whether the function was called correctly. You can do this by piping <code>check_function()</code> into <code>check_result()</code>, <code>check_output()</code>, or <code>check_error()</code>, depending on whether you want to check the result of the function call, the output the function call generates, or the error the call generates.</p>
<p>As an example, suppose you want the student to call the sum function on a vector containing the values 1 to 5.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Calculate sum of vector 1 to 5</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a></code></pre></div>
<p>One way to solve this is with <code>check_output_expr()</code>, but this does not explicitly require the student to use the <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> function. To make the usage of <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> explicit, you can use <code>check_function()</code> in combination with <code>check_result()</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"sum"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_result</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a></code></pre></div>
<p>Here, <code>check_function()</code> looks for the call of <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> in both student and solution code, and then <code>check_result()</code> runs both (in their respective environments). Finally, with <code>check_equal()</code> you verify that the results of the function calls are equal. The above SCT would accept all of the following submissions:</p>
<ul>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum(5:1)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum(c(1, 2, 4, 3, 5))</a></code></li>
<li><code>x &lt;- c(1, 2, 3, 4, 5); sum(x)</code></li>
</ul>
<p>When to use <code>check_result()</code> in combination with <code>check_function()</code>? Whenever there are is a multitude of ways to call a function, typically when the argument it takes is simply <code>...</code>. Functions from tidyverse packages such as <code>tidyr</code> and <code>dplyr</code> are typical use cases. Suppose you want to check whether a student correctly calculated a new column and selected two columsn from <code>mtcars</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Create a new column lsp100km and select it, together with mpg</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">lsp100km =</span> <span class="fl">235.214</span> <span class="op">/</span><span class="st"> </span>mpg) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(mpg, lsp100km)</a></code></pre></div>
<p>With the following SCT:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"select"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_result</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a></code></pre></div>
<p>Both of the following submissions would pass. A <code>check_arg()</code>-based SCT chain would have a very hard time allowing for all of these solutions.</p>
<ul>
<li><code>mtcars %&gt;% mutate(lsp100km = 235.214 / mpg) %&gt;% select(mpg, lsp100km)</code></li>
<li><code>mtcars %&gt;% select(mpg, lsp100km = 235.214 / mpg)</code></li>
</ul>
<p><em>Note:</em> <code>testwhat</code> can handle the <code><a href="https://dplyr.tidyverse.org/reference/reexports.html">%&gt;%</a></code>: it will convert <code>a %&gt;% f(b)</code> to <code>f(a, b)</code> again, so you don’t have to worry about anything.</p>
</div>
</div>
<div id="example-3-multiple-function-calls" class="section level2">
<h2 class="hasAnchor">
<a href="#example-3-multiple-function-calls" class="anchor"></a>Example 3: Multiple function calls</h2>
<p><code>index</code>, which is 1 by default, becomes important when there are several calls of the same function. Suppose that your exercise requires the student to call the <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> function twice: once on <code>pi</code> and once on <code><a href="https://rdrr.io/r/base/Log.html">exp(1)</a></code>, Euler’s number. A possible solution could be the following:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Call round on pi</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(pi, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co"># Call round on e</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/Log.html">exp</a></span>(<span class="dv">1</span>), <span class="dv">3</span>)</a></code></pre></div>
<p>To test both these function calls, you’ll need the following SCT:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"round"</span>, <span class="dt">index =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_arg</span>(<span class="st">"x"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"round"</span>, <span class="dt">index =</span> <span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_arg</span>(<span class="st">"x"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a></code></pre></div>
<p>The first <code>check_function()</code> chain, where <code>index = 1</code>, checks the solution code for the first function call of <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code>, finds it - <code><a href="https://rdrr.io/r/base/Round.html">round(pi, 3)</a></code> - and then goes to look through the student code to find a function call of <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code>. It is possible that there are 5 function calls of <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> in the student’s submission, and that only the fourth call matches the requirements for the first <code>check_function()</code> chain, but testwhat matches function calls in the student code by the index of the call in the solution code.</p>
<p>This means that all of the following student submissions would be accepted:</p>
<ul>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(pi, 3); round(exp(1), 3)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(exp(1), 3); round(pi, 3)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(pi, 3); round(123.456); round(exp(1), 3)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Round.html">round(exp(1), 3); round(123.456); round(pi, 3)</a></code></li>
</ul>
<p>Of course, you can also specify all other arguments to customize your test, such as <code>eval</code>, <code>args</code>, <code>not_called_msg</code> and <code>incorrect_msg</code>.</p>
</div>
<div id="example-4-multiple-function-calls-2" class="section level2">
<h2 class="hasAnchor">
<a href="#example-4-multiple-function-calls-2" class="anchor"></a>Example 4: Multiple function calls (2)</h2>
<p>When you’re checking a function call, <code>check_function()</code> will look for all ‘possible candidates’ to match the function call in the solution. This can have some nasty side effects, though. Similar to the previous example, suppose that you want the student to use <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> twice, but you only want to test the second <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> call:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Call round on pi</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(pi, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co"># Call round on e</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/Log.html">exp</a></span>(<span class="dv">1</span>), <span class="dv">3</span>)</a></code></pre></div>
<p>An possible SCT would look like this then:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"round"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_arg</span>(<span class="st">"x"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a></code></pre></div>
<p>Suppose now that the student submits the following answer</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># Call round on pi</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(pi, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co"># Call round on e</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/Log.html">exp</a></span>(<span class="dv">2</span>), <span class="dv">3</span>)</a></code></pre></div>
<p>If you try this out, you’ll see that <code>pi</code> will be highlighted, in the first call. This should be the second call, right? Here’s why it happens, step by step:</p>
<ul>
<li>
<code>check_function("round")</code> looks for all calls of <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> in the student’s code. It finds two: on line 2 and on line 4.</li>
<li>Next, <code>check_arg("x")</code> checks whether the <code>x</code> argument is specified. It sees that both calls of <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> do so, so both calls are still candidate to match the solution’s function call.</li>
<li>Next, <code>check-equal()</code> checks if the actual value of <code>x</code> carresponds to the value of that argument in the solution. More specifically, it looks for a <code>x</code> argument that equals <code><a href="https://rdrr.io/r/base/Log.html">exp(1)</a></code>. It checks the <code>x</code> argument of the first <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> call and sees it’s no good. Then it checks the <code>x</code> argument of the second <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> call and sees it’s no good either. At this point the SCT fails, and simply the first function of the candidates, the one at line 2, is highlighted as the incorrect one.</li>
</ul>
<p>You can solve this by ‘ruling out’ the first <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> call as a candidate, by simply using a <code>check_function()</code> chain beforehand:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"round"</span>, <span class="dt">index =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_arg</span>(<span class="st">"x"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"round"</span>, <span class="dt">index =</span> <span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_arg</span>(<span class="st">"x"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a></code></pre></div>
<p>This way, the first <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> call will not be considered as a candidate anymore by the time you’re checking the second <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> call. If you submit the same student code for this SCT, you will see that highlighting happens correctly this time.</p>
</div>
<div id="example-5-----argument" class="section level2">
<h2 class="hasAnchor">
<a href="#example-5-----argument" class="anchor"></a>Example 5: <code>...</code> argument</h2>
<p>Behind the scenes <code>check_function()</code> uses the <code><a href="https://rdrr.io/r/base/match.call.html">match.call()</a></code> function, to match the arguments to the function parameters. As an example, all of these different but equivalent ways to call the <code><a href="https://rdrr.io/r/base/grep.html">grepl()</a></code> function:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">pattern =</span> <span class="st">"a{2}"</span>, <span class="dt">x =</span> <span class="st">"aabb"</span>)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">pat =</span> <span class="st">"a{2}"</span>, <span class="dt">x =</span> <span class="st">"aabb"</span>)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"a{2}"</span>, <span class="dt">x =</span> <span class="st">"aabb"</span>)</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"a{2}"</span>, <span class="st">"aabb"</span>)</a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">x =</span> <span class="st">"aabb"</span>, <span class="dt">pattern =</span> <span class="st">"a{2}"</span>)</a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">x =</span> <span class="st">"aabb"</span>, <span class="st">"a{2}"</span>)</a></code></pre></div>
<p>Are converted into a standardized form by <code>match.call</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="dt">pattern =</span> <span class="st">"a{2}"</span>, <span class="dt">x =</span> <span class="st">"aabb"</span>)</a></code></pre></div>
<p>That way, it’s easy to tell how each argument was specified.</p>
<p>However, in R, there’s the so-called ellipsis argument to pass arguments in a very free form, without having to list them in the function signature explicitly. They are typically used in an S3 context, where the arguments are dispatched to ‘lower level S3 functions’. <code><a href="https://rdrr.io/r/base/match.call.html">match.call()</a></code> cannot handle the ellipsis argument in a straightforward way.</p>
<p>In terms of argument matching in general, 4 things can happen:</p>
<ol style="list-style-type: decimal">
<li><p><code><a href="https://rdrr.io/r/base/match.call.html">match.call()</a></code> perfectly works, and every argument you pass is matched to an argument name, without any ellipsis problems.</p></li>
<li><p><code>check_function()</code> figures out that you wanted to test an S3 function (<code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> is a great example, it has a bunch of class-specific implementation). Based on the class of the first argument, it figures out the ‘more detailed’, class-specific implementation and tries to match the arguments to the signature of this more detailed function. NOTE: it is still possible that this signature features the <code>...</code> arguments, so the points below apply as well for this case.</p></li>
<li><p>The function call that <code><a href="https://rdrr.io/r/base/match.call.html">match.call()</a></code> has to standardize contains arguments that are matched to the ellipsis, but these arguments are named explicitly, for example the the <code>main</code> argument in <code><a href="https://rdrr.io/r/graphics/plot.html">plot(mtcars$wt, mtcars$hp, main = 'mtcars plot')</a></code>. In this case, <code><a href="https://rdrr.io/r/base/match.call.html">match.call()</a></code> will match <code>mtcars$wt</code> to <code>x</code>, <code>mtcars$hp</code> to <code>y</code> and <code>'mtcars plot'</code> to <code>main</code>, just like for regular arguments.</p></li>
<li><p>The function call that <code><a href="https://rdrr.io/r/base/match.call.html">match.call()</a></code> has to standardize contains arguments that are matched to the ellipsis, but these arguments are not explicitly named. In this case, all ‘unnamed arguments’ are merged together in a list under the argument name <code>...</code>.</p></li>
</ol>
<p>Things become tricky if case 4 occurs: if a student specifies multiple arguments without naming them, and you want to check these arguments, you’ll need to use <code>"..."</code> inside your <code>args</code> function. However, be aware that this <code>"..."</code> part can represent a number of arguments that the student specified.</p>
<p>As an example, suppose you want to the student the calculate the sum of 1, 2, 3, 4, and <code>NA</code>. <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> supports the following approach:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="ot">NA</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>To test this:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"sum"</span>) <span class="op">%&gt;%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">    <span class="kw">check_arg</span>(., <span class="st">"..."</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">    <span class="kw">check_arg</span>(., <span class="st">"na.rm"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">}</a></code></pre></div>
<p>All of the following submissions will pass:</p>
<ul>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum(1, 2, 3, 4, NA, na.rm = TRUE)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum(1, 1+1, 1+2, 1+3, NA, na.rm = TRUE)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum(na.rm = TRUE, 1, 1+1, 1+2, 1+3, NA)</a></code></li>
</ul>
<p>However, none of the following submissions will pass (as you see, order is important):</p>
<ul>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum(1, 2, 3, 4, NA, na.rm = FALSE)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum(1, 2, 3, NA, na.rm = TRUE)</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum(1, 2, 4, 3, NA, na.rm = TRUE)</a></code></li>
</ul>
<p>If the arguments that are matched to <code>...</code> are not correct, <code>check_equal()</code> will automatically generate the message:</p>
<pre><code>Check your call of `sum()`. Did you correctly specify the arguments that are matched to `...`?</code></pre>
<p>In this example of using the <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> function, using <code>check_function()</code> is a bad idea to start with. You also want to allow the student to use:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="ot">NA</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>which is perfectly valid as well. That’s why the following SCT would be more appropriate:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_output_expr</span>(<span class="st">"10"</span>, <span class="dt">missing_msg =</span> <span class="st">"Did you correctly print out the sum?"</span>)</a></code></pre></div>
</div>
<div id="example-6-allowing-for-different-solutions" class="section level2">
<h2 class="hasAnchor">
<a href="#example-6-allowing-for-different-solutions" class="anchor"></a>Example 6: Allowing for different solutions</h2>
<p>A typical example of this is an exercise with the <code><a href="https://rdrr.io/r/graphics/plot.html">plot()</a></code> function:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">time =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">0</span>, <span class="dv">2</span><span class="op">*</span>pi, <span class="fl">0.01</span>))</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">df<span class="op">$</span>res &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span>(df<span class="op">$</span>time)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co"># create a plot of res vs time</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(df<span class="op">$</span>time, df<span class="op">$</span>res)</a></code></pre></div>
<p>All of the following submissions should pass:</p>
<ul>
<li><code><a href="https://rdrr.io/r/graphics/plot.html">plot(df$time, df$res)</a></code></li>
<li><code><a href="https://rdrr.io/r/graphics/plot.html">plot(df[['time']], df[['res']])</a></code></li>
<li><code><a href="https://rdrr.io/r/graphics/plot.html">plot(res ~ time, data = df)</a></code></li>
<li><code><a href="https://rdrr.io/r/graphics/plot.html">plot(df$res ~ df$time)</a></code></li>
</ul>
<p>However, if you simply use the following SCT</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">'plot'</span>) <span class="op">%&gt;%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">  <span class="kw">check_arg</span>(., <span class="st">'x'</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">  <span class="kw">check_arg</span>(., <span class="st">'y'</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">}</a></code></pre></div>
<p>The third and fourth plot won’t work, because the solution code does not contain the calls to compare to. You can use the more granular <code>check_*()</code> functions in combination with <code>check_or()</code> and <code>override_solution()</code>. As the name suggests, this temporarily overrides the solution so that you can use <code>check_function()</code> for different possibilities.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_or</span>(</a>
<a class="sourceLine" id="cb24-2" data-line-number="2">  <span class="kw">check_function</span>(., <span class="st">'plot'</span>) <span class="op">%&gt;%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">    <span class="kw">check_arg</span>(., <span class="st">'x'</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb24-4" data-line-number="4">    <span class="kw">check_arg</span>(., <span class="st">'y'</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">  },</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">  <span class="kw">override_solution</span>(., <span class="st">'plot(res ~ time, data = df)'</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-7" data-line-number="7"><span class="st">    </span><span class="kw">check_function</span>(<span class="st">'plot'</span>) <span class="op">%&gt;%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">      <span class="kw">check_arg</span>(., <span class="st">'formula'</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb24-9" data-line-number="9">      <span class="kw">check_arg</span>(., <span class="st">'data'</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb24-10" data-line-number="10">    },</a>
<a class="sourceLine" id="cb24-11" data-line-number="11">  <span class="kw">override_solution</span>(., <span class="st">'plot(df$res ~ df$time)'</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-12" data-line-number="12"><span class="st">    </span><span class="kw">check_function</span>(<span class="st">'plot'</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-13" data-line-number="13"><span class="st">    </span><span class="kw">check_arg</span>(<span class="st">'formula'</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-14" data-line-number="14"><span class="st">    </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb24-15" data-line-number="15">)</a></code></pre></div>
</div>
<div id="example-7-comparing-formulas" class="section level2">
<h2 class="hasAnchor">
<a href="#example-7-comparing-formulas" class="anchor"></a>Example 7: Comparing formulas</h2>
<p><code>testwhat</code> has built-in functionality to deal with formulas rather robustly. Suppose you want to check whether a student called the <code>lm</code> function correctly:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(mpg <span class="op">~</span><span class="st"> </span>wt <span class="op">+</span><span class="st"> </span>hp, <span class="dt">data =</span> mtcars)</a></code></pre></div>
<p>If you use the following SCT:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">'mtcars'</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_arg</span>(<span class="st">'formula'</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a></code></pre></div>
<p><code>testwhat</code> will recognize that the <code>formula</code> argument you specified is indeed an R formula object. It will then parse the formula and make it robust to different orderings. This means that the following submissions pass:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(mpg <span class="op">~</span><span class="st"> </span>wt <span class="op">+</span><span class="st"> </span>hp, <span class="dt">data =</span> mtcars)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(mpg <span class="op">~</span><span class="st"> </span>hp <span class="op">+</span><span class="st"> </span>wt, <span class="dt">data =</span> mtcars)</a></code></pre></div>
<p>And the following fail:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(mpg <span class="op">~</span><span class="st"> </span>wt <span class="op">+</span><span class="st"> </span>hp <span class="op">+</span><span class="st"> </span>drat, <span class="dt">data =</span> mtcars)</a></code></pre></div>
<p>So there is some ‘normalization’ going on, but handle with care.</p>
</div>
<div id="appendix-advanced-automatic-feedback" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix-advanced-automatic-feedback" class="anchor"></a>Appendix: Advanced Automatic Feedback</h2>
<p>The automatic messages that are generated when the student makes mistakes of different kinds is continuously improved to be as insightful as possible. For example, when the solution expects:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="fl">1.1234</span>)</a></code></pre></div>
<p>but the student submits:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="st">"1.1234"</span>)</a></code></pre></div>
<p>The following SCT:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">check_function</span>(<span class="st">"print"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_arg</span>(<span class="st">"x"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a></code></pre></div>
<p>will generate the message: “Have you correctly specified the argument <code>x</code> inside <code><a href="https://rdrr.io/r/base/print.html">print()</a></code>? You specified a character string, while it should be a number.”. When comparing character strings between student and solution, this comparison goes further, hinting about potential incorrect capitalization, incorrect spacing, incorrect punctuation or possible typos.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#example-1-basic">Example 1: Basic</a></li>
      <li><a href="#example-3-multiple-function-calls">Example 3: Multiple function calls</a></li>
      <li><a href="#example-4-multiple-function-calls-2">Example 4: Multiple function calls (2)</a></li>
      <li><a href="#example-5-----argument">Example 5: <code>...</code> argument</a></li>
      <li><a href="#example-6-allowing-for-different-solutions">Example 6: Allowing for different solutions</a></li>
      <li><a href="#example-7-comparing-formulas">Example 7: Comparing formulas</a></li>
      <li><a href="#appendix-advanced-automatic-feedback">Appendix: Advanced Automatic Feedback</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andreas Alfons, Filip Schouwenaars, Vincent Vankrunkelsven.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.0.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'cba84df952b7606852b92617801244e5',
    indexName: 'datacamp_testwhat',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
